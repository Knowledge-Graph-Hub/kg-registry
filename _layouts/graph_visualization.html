---
layout: default
---

<div class="row">
  <div class="col-12">
    <h1>{{ page.title }}</h1>
    <p>{{ page.description }}</p>
  </div>
</div>

<!-- Help Section -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center" style="cursor: pointer;" onclick="toggleHelp()">
        <h4 class="mb-0"><i class="bi bi-info-circle"></i> How to use this visualization</h4>
        <span id="help-toggle-icon">âˆ’</span>
      </div>
      <div class="card-body" id="help-content">
        <p>This interactive graph shows the relationships between resources in the KG-Registry. Start by selecting one or more resources to visualize their connections.</p>
        <hr>
        <div class="row">
          <div class="col-md-6">
            <h5>Getting Started</h5>
            <ul>
              <li><strong>Select resources</strong> from the dropdown list on the right (hold Ctrl/Cmd for multiple selections)</li>
              <li><strong>Click "Add Selected Resources"</strong> to add them to the graph</li>
              <li>Each resource will show <strong>only its direct products</strong> by default</li>
            </ul>
          </div>
          <div class="col-md-6">
            <h5>Interacting with the Graph</h5>
            <ul>
              <li><strong>Right-click on a node</strong> to expand its connections or hide it</li>
              <li><strong>Left-click on a node</strong> to see its details and highlight connections</li>
              <li><strong>Drag nodes</strong> to reposition them for better visibility</li>
              <li><strong>Zoom</strong> in and out using the mouse wheel or pinch gestures</li>
            </ul>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-md-6">
            <h5>Customizing the View</h5>
            <ul>
              <li><strong>Show/hide products</strong> using the checkbox in Display Options</li>
              <li><strong>Show domain connections</strong> to see resources that share domains</li>
              <li><strong>Search</strong> for specific resources using the search box</li>
            </ul>
          </div>
          <div class="col-md-6">
            <h5>Managing Resources</h5>
            <ul>
              <li><strong>Remove resources</strong> by clicking the Ã— button next to their name</li>
              <li><strong>Clear all</strong> resources with the "Clear Graph" button</li>
              <li><strong>User-selected resources</strong> are highlighted with bold black borders</li>
            </ul>
          </div>
        </div>
        <div class="alert alert-info mt-3 mb-0">
          <strong>ðŸ’¡ Tip:</strong> Start with 1-3 resources to keep the visualization manageable. Right-click nodes to expand their connections. Products only show connections to resources that are already in the graph.
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Export Menu and Display Options -->
<div class="row mt-3">
  <div class="col-12">
    <div class="d-flex gap-2 align-items-start">
      <div class="dropdown">
        <button class="btn btn-outline-primary dropdown-toggle" type="button" id="exportDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-download"></i> Export Current View
        </button>
        <ul class="dropdown-menu" aria-labelledby="exportDropdown">
          <li><h6 class="dropdown-header">Export as Image</h6></li>
          <li>
            <a class="dropdown-item" href="#" id="export-svg">
              <i class="bi bi-file-earmark-image"></i> SVG (Vector)
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="#" id="export-png">
              <i class="bi bi-file-earmark-image-fill"></i> PNG (Raster)
            </a>
          </li>
          <li><hr class="dropdown-divider"></li>
          <li><h6 class="dropdown-header">Export Data</h6></li>
          <li>
            <a class="dropdown-item" href="#" id="export-tsv">
              <i class="bi bi-table"></i> Interactions (TSV)
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="#" id="export-yaml">
              <i class="bi bi-filetype-yml"></i> Resources (YAML)
            </a>
          </li>
          <li>
            <a class="dropdown-item" href="#" id="export-jsonld">
              <i class="bi bi-filetype-json"></i> Resources (JSON-LD)
            </a>
          </li>
        </ul>
      </div>
      
      <div class="dropdown">
        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="displayOptionsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-sliders"></i> Display Options
        </button>
        <ul class="dropdown-menu" aria-labelledby="displayOptionsDropdown">
          <li>
            <div class="dropdown-item-text">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="show-products" checked>
                <label class="form-check-label" for="show-products">
                  Show Products
                </label>
              </div>
            </div>
          </li>
          <li>
            <div class="dropdown-item-text">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="show-domain-connections">
                <label class="form-check-label" for="show-domain-connections">
                  Show Domain Connections
                </label>
              </div>
            </div>
          </li>
          <li><hr class="dropdown-divider"></li>
          <li>
            <div class="dropdown-item-text">
              <label for="node-type-filter" class="form-label mb-1">Filter Node Types:</label>
              <select id="node-type-filter" class="form-select form-select-sm">
                <option value="all" selected>All Types</option>
              </select>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="row mt-4">
  <div class="col-lg-9">
    <div id="graph-container" class="graph-visualization">
      <!-- Graph visualization will be rendered here -->
    </div>
  </div>
  <div class="col-lg-3">
    <div class="card mb-4">
      <div class="card-header">
        <h3>Resource Selection</h3>
      </div>
      <div class="card-body">
        <div class="mb-3">
          <label for="resource-selector" class="form-label">Select Resource(s):</label>
          <select id="resource-selector" class="form-select" size="8" multiple>
            <option value="" disabled>Loading resources...</option>
          </select>
          <small class="form-text text-muted">Hold Ctrl/Cmd to select multiple resources</small>
        </div>
        <div class="mb-3">
          <label for="search-input" class="form-label">Search Resources:</label>
          <input type="text" id="search-input" class="form-control" placeholder="Filter resources by name">
        </div>
        <div class="mb-3">
          <button id="add-resource" class="btn btn-primary w-100">Add Selected Resources</button>
        </div>
        <div class="mb-3">
          <button id="clear-graph" class="btn btn-outline-secondary w-100">Clear Graph</button>
        </div>
        
        <div class="mt-3">
          <strong>Active Resources:</strong>
          <div id="active-resources-list" class="mt-2">
            <small class="text-muted">No resources selected. Choose resources above to visualize their connections.</small>
          </div>
        </div>
        
        <div class="mt-4 text-muted">
          <small>
            <span id="node-count">0</span> nodes / 
            <span id="edge-count">0</span> edges / 
            <span id="component-count">0</span> component<span id="component-plural">s</span>
          </small>
          <br>
          <small class="text-muted" style="font-size: 0.75rem;">
            <em>Connected components: separate subgraphs with no links between them</em>
          </small>
        </div>
      </div>
    </div>
    
    <div class="card">
      <div class="card-header">
        <h3>Legend</h3>
      </div>
      <div class="card-body">
        <div id="graph-legend"></div>
      </div>
    </div>
  </div>
</div>

{{ content }}

<script>
  function toggleHelp() {
    const content = document.getElementById('help-content');
    const icon = document.getElementById('help-toggle-icon');
    
    if (content.style.display === 'none') {
      content.style.display = 'block';
      icon.textContent = 'âˆ’';
    } else {
      content.style.display = 'none';
      icon.textContent = '+';
    }
  }
</script>
